{"version":3,"names":[],"mappings":"","sources":["util.js"],"sourcesContent":["// Utility function\nfunction Util () {};\n\n/*\n\tclass manipulation functions\n*/\nUtil.hasClass = function(el, className) {\n\tif (el.classList) return el.classList.contains(className);\n\telse return !!el.getAttribute('class').match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'));\n};\n\nUtil.addClass = function(el, className) {\n\tvar classList = className.split(' ');\n \tif (el.classList) el.classList.add(classList[0]);\n  else if (!Util.hasClass(el, classList[0])) el.setAttribute('class', el.getAttribute('class') +  \" \" + classList[0]);\n \tif (classList.length > 1) Util.addClass(el, classList.slice(1).join(' '));\n};\n\nUtil.removeClass = function(el, className) {\n\tvar classList = className.split(' ');\n\tif (el.classList) el.classList.remove(classList[0]);\n\telse if(Util.hasClass(el, classList[0])) {\n\t\tvar reg = new RegExp('(\\\\s|^)' + classList[0] + '(\\\\s|$)');\n    el.setAttribute('class', el.getAttribute('class').replace(reg, ' '));\n\t}\n\tif (classList.length > 1) Util.removeClass(el, classList.slice(1).join(' '));\n};\n\nUtil.toggleClass = function(el, className, bool) {\n\tif(bool) Util.addClass(el, className);\n\telse Util.removeClass(el, className);\n};\n\nUtil.setAttributes = function(el, attrs) {\n  for(var key in attrs) {\n    el.setAttribute(key, attrs[key]);\n  }\n};\n\n/*\n  DOM manipulation\n*/\nUtil.getChildrenByClassName = function(el, className) {\n  var children = el.children,\n    childrenByClass = [];\n  for (var i = 0; i < el.children.length; i++) {\n    if (Util.hasClass(el.children[i], className)) childrenByClass.push(el.children[i]);\n  }\n  return childrenByClass;\n};\n\nUtil.is = function(elem, selector) {\n  if(selector.nodeType){\n    return elem === selector;\n  }\n\n  var qa = (typeof(selector) === 'string' ? document.querySelectorAll(selector) : selector),\n    length = qa.length,\n    returnArr = [];\n\n  while(length--){\n    if(qa[length] === elem){\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/*\n\tAnimate height of an element\n*/\nUtil.setHeight = function(start, to, element, duration, cb, timeFunction) {\n\tvar change = to - start,\n\t    currentTime = null;\n\n  var animateHeight = function(timestamp){\n    if (!currentTime) currentTime = timestamp;\n    var progress = timestamp - currentTime;\n    if(progress > duration) progress = duration;\n    var val = parseInt((progress/duration)*change + start);\n    if(timeFunction) {\n      val = Math[timeFunction](progress, start, to - start, duration);\n    }\n    element.style.height = val+\"px\";\n    if(progress < duration) {\n        window.requestAnimationFrame(animateHeight);\n    } else {\n    \tif(cb) cb();\n    }\n  };\n\n  //set the height of the element before starting animation -> fix bug on Safari\n  element.style.height = start+\"px\";\n  window.requestAnimationFrame(animateHeight);\n};\n\n/*\n\tSmooth Scroll\n*/\n\nUtil.scrollTo = function(final, duration, cb, scrollEl) {\n  var element = scrollEl || window;\n  var start = element.scrollTop || document.documentElement.scrollTop,\n    currentTime = null;\n\n  if(!scrollEl) start = window.scrollY || document.documentElement.scrollTop;\n\n  var animateScroll = function(timestamp){\n  \tif (!currentTime) currentTime = timestamp;\n    var progress = timestamp - currentTime;\n    if(progress > duration) progress = duration;\n    var val = Math.easeInOutQuad(progress, start, final-start, duration);\n    element.scrollTo(0, val);\n    if(progress < duration) {\n      window.requestAnimationFrame(animateScroll);\n    } else {\n      cb && cb();\n    }\n  };\n\n  window.requestAnimationFrame(animateScroll);\n};\n\n/*\n  Focus utility classes\n*/\n\n//Move focus to an element\nUtil.moveFocus = function (element) {\n  if( !element ) element = document.getElementsByTagName(\"body\")[0];\n  element.focus();\n  if (document.activeElement !== element) {\n    element.setAttribute('tabindex','-1');\n    element.focus();\n  }\n};\n\n/*\n  Misc\n*/\n\nUtil.getIndexInArray = function(array, el) {\n  return Array.prototype.indexOf.call(array, el);\n};\n\nUtil.cssSupports = function(property, value) {\n  if('CSS' in window) {\n    return CSS.supports(property, value);\n  } else {\n    var jsProperty = property.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase();});\n    return jsProperty in document.body.style;\n  }\n};\n\n// merge a set of user options into plugin defaults\n// https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\nUtil.extend = function() {\n  // Variables\n  var extended = {};\n  var deep = false;\n  var i = 0;\n  var length = arguments.length;\n\n  // Check if a deep merge\n  if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n    deep = arguments[0];\n    i++;\n  }\n\n  // Merge the object into the extended object\n  var merge = function (obj) {\n    for ( var prop in obj ) {\n      if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\n        // If deep merge and property is an object, merge properties\n        if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\n          extended[prop] = extend( true, extended[prop], obj[prop] );\n        } else {\n          extended[prop] = obj[prop];\n        }\n      }\n    }\n  };\n\n  // Loop through each object and conduct a merge\n  for ( ; i < length; i++ ) {\n    var obj = arguments[i];\n    merge(obj);\n  }\n\n  return extended;\n};\n\n// Check if Reduced Motion is enabled\nUtil.osHasReducedMotion = function() {\n  if(!window.matchMedia) return false;\n  var matchMediaObj = window.matchMedia('(prefers-reduced-motion: reduce)');\n  if(matchMediaObj) return matchMediaObj.matches;\n  return false; // return false if not supported\n};\n\n/*\n\tPolyfills\n*/\n//Closest() method\nif (!Element.prototype.matches) {\n\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n\tElement.prototype.closest = function(s) {\n\t\tvar el = this;\n\t\tif (!document.documentElement.contains(el)) return null;\n\t\tdo {\n\t\t\tif (el.matches(s)) return el;\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while (el !== null && el.nodeType === 1);\n\t\treturn null;\n\t};\n}\n\n//Custom Event() constructor\nif ( typeof window.CustomEvent !== \"function\" ) {\n\n  function CustomEvent ( event, params ) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent( 'CustomEvent' );\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    return evt;\n   }\n\n  CustomEvent.prototype = window.Event.prototype;\n\n  window.CustomEvent = CustomEvent;\n}\n\n/*\n\tAnimation curves\n*/\nMath.easeInOutQuad = function (t, b, c, d) {\n\tt /= d/2;\n\tif (t < 1) return c/2*t*t + b;\n\tt--;\n\treturn -c/2 * (t*(t-2) - 1) + b;\n};\n\nMath.easeInQuart = function (t, b, c, d) {\n\tt /= d;\n\treturn c*t*t*t*t + b;\n};\n\nMath.easeOutQuart = function (t, b, c, d) {\n  t /= d;\n\tt--;\n\treturn -c * (t*t*t*t - 1) + b;\n};\n\nMath.easeInOutQuart = function (t, b, c, d) {\n\tt /= d/2;\n\tif (t < 1) return c/2*t*t*t*t + b;\n\tt -= 2;\n\treturn -c/2 * (t*t*t*t - 2) + b;\n};\n\nMath.easeOutElastic = function (t, b, c, d) {\n  var s=1.70158;var p=d*0.7;var a=c;\n  if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n  if (a < Math.abs(c)) { a=c; var s=p/4; }\n  else var s = p/(2*Math.PI) * Math.asin (c/a);\n  return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n};\n\n\n/* JS Utility Classes */\n\n// make focus ring visible only for keyboard navigation (i.e., tab key)\n(function() {\n  var focusTab = document.getElementsByClassName('js-tab-focus'),\n    shouldInit = false,\n    outlineStyle = false,\n    eventDetected = false;\n\n  function detectClick() {\n    if(focusTab.length > 0) {\n      resetFocusStyle(false);\n      window.addEventListener('keydown', detectTab);\n    }\n    window.removeEventListener('mousedown', detectClick);\n    outlineStyle = false;\n    eventDetected = true;\n  };\n\n  function detectTab(event) {\n    if(event.keyCode !== 9) return;\n    resetFocusStyle(true);\n    window.removeEventListener('keydown', detectTab);\n    window.addEventListener('mousedown', detectClick);\n    outlineStyle = true;\n  };\n\n  function resetFocusStyle(bool) {\n    var outlineStyle = bool ? '' : 'none';\n    for(var i = 0; i < focusTab.length; i++) {\n      focusTab[i].style.setProperty('outline', outlineStyle);\n    }\n  };\n\n  function initFocusTabs() {\n    if(shouldInit) {\n      if(eventDetected) resetFocusStyle(outlineStyle);\n      return;\n    }\n    shouldInit = focusTab.length > 0;\n    window.addEventListener('mousedown', detectClick);\n  };\n\n  initFocusTabs();\n  window.addEventListener('initFocusTabs', initFocusTabs);\n}());\n\nfunction resetFocusTabsStyle() {\n  window.dispatchEvent(new CustomEvent('initFocusTabs'));\n};\n\n//credits http://css-tricks.com/snippets/jquery/move-cursor-to-end-of-textarea-or-input/\nfunction putCursorAtEnd(el) {\n  if (el.setSelectionRange) {\n    var len = el.value.length * 2;\n    el.focus();\n    el.setSelectionRange(len, len);\n  } else {\n    el.value = el.value;\n  }\n};"],"file":"util.js"}